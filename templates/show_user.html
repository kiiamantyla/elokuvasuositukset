{% extends "layout.html" %}

{% block title %}Käyttäjä {{ user.username }}{% endblock %}


{% block content %}
<h2>Käyttäjä: {{ user.username }}</h2>


{% if movies %}
  <p>
    Käyttäjällä on yhteensä
    {{ movies | count }} elokuvasuositus{% if movies | count != 1 %}ta{% endif %}.
  </p>

  <h3>Elokuvasuositukset</h3>
  <ul class="movie-list">
    {% for movie in movies %}
      <li class="movie-item">
        <a href="/movie/{{ movie.id }}">{{ movie.title }}</a>

        {% if movie.year %}
          ({{ movie.year }})
        {% endif %}

        {% if movie.genres %}
          – <em>{{ movie.genres | map(attribute='value') | join(', ') }}</em>
        {% endif %}

        {% if movie.age_limit %}
          – Ikäraja: {{ movie.age_limit }}
        {% endif %}

        {% if movie.grade %}
          – Arvosana: {{ movie.grade }}/10
        {% endif %}

        <br>
        Arvostelut: {{ movie.review_count or 0 }}

        {% if session.user_id == movie.user_id %}
          <div class="movie-actions">
            <a href="/edit_movie/{{ movie.id }}">Muokkaa</a> |
            <a href="/remove_movie/{{ movie.id }}">Poista</a> |
            <a href="/images/{{ movie.id }}">Kuvat</a>
          </div>
        {% endif %}

      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>Käyttäjällä ei ole vielä elokuvasuosituksia.</p>
{% endif %}

{% endblock %}
